#!/bin/sh
#------------------------------------------------------------------------------
# NOTE: This code was generated by a build tool using repo
# ({{projectTemplatesGithubCoordinates.user}}/{{projectTemplatesGithubCoordinates.repo}}#{{projectTemplatesGithubCoordinates.commitish}}).
#
# Changes to this file may cause incorrect behavior and will be lost if
# the code is regenerated. Please use the documentation provided
# in http://the-container-store.github.io/Gradle-Releaser/ to see
# how to regenerate this file based on your project settings.
#------------------------------------------------------------------------------
{{=<% %>=}}
{{ $environment                := env "DEPLOYMENT_ENVIRONMENT" }}

<%#vault.environmentVariables %>
export <% name %>='{{ with secret (printf "<% secretTemplate %>" $environment) }}{{ index .Data "<% key %>" }}{{ end }}'
<%/vault.environmentVariables%>

java \
  -Ddeployment.environment=${DEPLOYMENT_ENVIRONMENT} \
  -Ddeployment.stack=${DEPLOYMENT_STACK} \
  -Dlogging.console.enabled=true \
  -Dserver.use-forward-headers=true \
  ${JAVA_OPTS} \
<%#vault.systemProperties %>
export <% name %>={{ with secret "<% secret %>" }}{{ index .Data "<% key %>" }}{{ end }}"
<%/vault.systemProperties%>
  -jar /home/<% runAsUser %>/<% buildArtifactName %>
<%={{ }}=%>
